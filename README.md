Решить задачу получилось, но не уверен в правильности решения.
